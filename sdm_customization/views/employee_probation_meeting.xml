<odoo>
    <record id="view_employee_probation_meeting_tree" model="ir.ui.view">
        <field name="name">employee.probation.meeting.tree</field>
        <field name="model">employee.probation.meeting</field>
        <field name="arch" type="xml">
            <tree string="Employee Probation Meetings">
                <field name="employee_id"/>
                <field name="date_meeting"/>
                <field name="probation_type"/>
                <field name="meeting_status" widget="badge"
                       decoration-danger="meeting_status == 'red'"
                       decoration-warning="meeting_status == 'yellow'"
                       decoration-success="meeting_status == 'green'"/>
                <field name="state" widget="badge"
                       decoration-danger="state == 'inprogress'"
                       decoration-success="state == 'completed'"/>
                <field name="reason"/>
            </tree>
        </field>
    </record>

    <record id="view_employee_probation_meeting_form" model="ir.ui.view">
        <field name="name">employee.probation.meeting.form</field>
        <field name="model">employee.probation.meeting</field>
        <field name="arch" type="xml">
            <form string="Employee Probation Meeting">
                <header>
                    <field name="state" widget="statusbar" statusbar_visible="inprogress,completed"/>
                    <button name="action_resolve" type="object" string="Resolved"
                            class="oe_highlight"
                            groups="sdm_customization.group_sdm"
                            attrs="{'invisible': [('state', '=', 'completed')]}"/>
                    <button name="action_set_inprogress" type="object" string="Set In Progress"
                        class="btn-secondary"
                            groups="sdm_customization.group_sdm"
                        attrs="{'invisible': [('state', '=', 'inprogress')]}"/>
                </header>
                <sheet>
                    <group>
                        <group>
                            <field name="employee_id"/>
                            <field name="meeting_status"/>
                        </group>
                        <group>
                            <field name="date_meeting"/>
                            <field name="probation_type"/>
                        </group>
                    </group>

                    <notebook>
                        <page string="Meeting Questions">
                            <group>
                                <group>
                                    <field name="q1_rating" widget="radio" options="{'horizontal': true}"/>
                                    <field name="q1_experience"/>
                                    <field name="q2_rating" widget="radio" options="{'horizontal': true}"/>
                                    <field name="q2_alignment"/>
                                    <field name="q3_rating" widget="radio" options="{'horizontal': true}"/>
                                    <field name="q3_attendance_kpi"/>
                                    <field name="q4_rating" widget="radio" options="{'horizontal': true}"/>
                                    <field name="q4_guidance"/>
                                </group>
                                <group>
                                    <field name="q5_rating" widget="radio" options="{'horizontal': true}"/>
                                    <field name="q5_hubstaff"/>
                                    <field name="q6_rating" widget="radio" options="{'horizontal': true}"/>
                                    <field name="q6_challenges"/>
                                    <field name="q7_rating" widget="radio" options="{'horizontal': true}"/>
                                    <field name="q7_daily_tasks"/>
                                </group>
                            </group>
                        </page>

                        <page string="Send Reason Email">
                            <group>
                                <field name="reason"/>
                                <field name="assignee_id"/>
                                <field name="selected_employee_ids" widget="many2many_tags"/>
                                <button name="action_send_reason_mail" type="object" string="Send Reason Mail"
                                        class="btn-primary" icon="fa-envelope"/>
                                <br/>
                                <field name="is_mail_sent" widget="boolean_toggle" invisible="1"/>
                            </group>
                        </page>

                        <page string="Action Taken" attrs="{'invisible': [('is_mail_sent', '=', False)]}">
                            <group>
                                <field name="action_taken_comment"/>
                                <field name="action_employee_ids" widget="many2many_tags"/>
                                <button name="action_send_action_mail" type="object" string="Send Action Mail"
                                        class="btn-primary" icon="fa-paper-plane"/>
                                <br/>
                                <field name="is_action_mail_sent" widget="boolean_toggle" invisible="1"/>
                            </group>
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" groups="base.group_user"
                           options="{'post_refresh': 'recipients'}"/>
                    <field name="activity_ids"/>
                    <field name="message_ids"/>
                </div>
            </form>
        </field>
    </record>

    <record id="view_employee_probation_meeting_search" model="ir.ui.view">
        <field name="name">employee.probation.meeting.search</field>
        <field name="model">employee.probation.meeting</field>
        <field name="arch" type="xml">
            <search string="Search Probation Meetings">
                <field name="employee_id"/>
                <field name="probation_type"/>
                <field name="meeting_status"/>
                <field name="state"/>
                <field name="date_meeting"/>

                <filter string="In Progress" name="filter_inprogress" domain="[('state','=','inprogress')]"/>
                <filter string="Completed" name="filter_completed" domain="[('state','=','completed')]"/>
                <filter string="Red Status" name="filter_red" domain="[('meeting_status','=','red')]"/>
                <filter string="Red Status" name="filter_red" domain="[('meeting_status','=','red')]"/>
                <filter string="Yellow Status" name="filter_yellow" domain="[('meeting_status','=','yellow')]"/>
                <filter string="Green Status" name="filter_green" domain="[('meeting_status','=','green')]"/>

                <separator/>

                <group expand="0" string="Group By">
                    <filter string="Employee" name="group_by_employee" context="{'group_by':'employee_id'}"/>
                    <filter string="Probation Type" name="group_by_probation_type"
                            context="{'group_by':'probation_type'}"/>
                    <filter string="Task Status" name="group_by_task_status"
                            context="{'group_by':'state'}"/>
                    <filter string="Meeting Status" name="group_by_meeting_status"
                            context="{'group_by':'meeting_status'}"/>
                    <!-- group by month (uses date_meeting:month) -->
                    <filter string="Meeting Month" name="group_by_meeting_month"
                            context="{'group_by':'date_meeting:month'}"/>
                </group>
            </search>
        </field>
    </record>

    <record id="action_employee_probation_meeting" model="ir.actions.act_window">
        <field name="name">Employee Probation Meetings</field>
        <field name="res_model">employee.probation.meeting</field>
        <field name="view_mode">tree,form</field>
    </record>
</odoo>
