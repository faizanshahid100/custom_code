<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!--Form view of the dashboard block-->
    <record id="dashboard_block_view_form" model="ir.ui.view">
        <field name="name">dashboard.block.view.form</field>
        <field name="model">dashboard.block</field>
        <field name="arch" type="xml">
            <form>
    <sheet>
        <group>
            <group>
                <div>
                    <field name="name" class="oe_inline"
                           style="font-size: 30px;"
                           placeholder="Block Name" required="1"/>
                </div>
            </group>
        </group>

        <group>
            <group>
                <!-- use attrs for conditional required -->
                <field name="model_id"
                       attrs="{'required': [('edit_mode', '=', True)]}"
                       options="{'no_create_edit': True, 'no_create': True}"/>
                <field name="client_action_id" attrs="{'invisible': [('client_action_id', '=', False)]}" />
                <field name="model_name" invisible="1"/>
                <field name="edit_mode" invisible="1"/>

                <!-- operation required only when edit_mode = True -->
                <field name="operation"
                       attrs="{'required': [('edit_mode', '=', True)]}"/>

                <!-- measured_field_id required only when edit_mode = True
                     keep options + domain as before -->
                <field name="measured_field_id"
                       attrs="{'required': [('edit_mode', '=', True)]}"
                       options="{'no_create_edit': True, 'no_create': True}"
                       domain="[('model_id','=',model_id), ('ttype','in',['float','integer','monetary']), ('store', '=', True)]"/>

                <field name="filter" widget="domain"
                       options="{'model': 'model_name'}"/>
            </group>
        </group>

        <group string="Block Information">
            <group>
                <field name="type" required="1"/>

                <!-- graph_type should be invisible when type == 'tile' -->
                <field name="graph_type"
                       attrs="{'invisible': [('type', '=', 'tile')]}"/>

                <!-- fa_icon invisible when type == 'graph' -->
                <field name="fa_icon"
                       attrs="{'invisible': [('type', '=', 'graph')]}"/>

                <!-- group_by_id invisibility + required only when type == 'graph' and edit_mode True -->
                <field name="group_by_id"
                       attrs="{
                           'invisible': [('type', '=', 'tile')],
                           'required': [('edit_mode', '=', True), ('type', '=', 'graph')]
                       }"
                       options="{'no_create_edit': True, 'no_create': True}"
                       domain="[('model_id','=',model_id),('ttype','in', ['many2one','char','selection','integer','float']), ('store', '=', True)]"/>

                <!-- tile_color only visible when type == 'tile' -->
                <field name="tile_color"
                       widget="color"
                       attrs="{'invisible': [('type', '!=', 'tile')]}"/>

                <!-- val_color only visible when type == 'tile' -->
                <field name="val_color"
                       widget="color"
                       attrs="{'invisible': [('type', '!=', 'tile')]}"/>

                <!-- text_color only visible when type == 'tile' -->
                <field name="text_color"
                       widget="color"
                       attrs="{'invisible': [('type', '!=', 'tile')]}"/>
            </group>
        </group>
    </sheet>
</form>
        </field>
    </record>
    <!--Tree view of the dashboard block-->
    <record id="dashboard_block_view_tree" model="ir.ui.view">
        <field name="name">dashboard.block.view.tree</field>
        <field name="model">dashboard.block</field>
        <field name="arch" type="xml">
            <tree>
                <field name="name"/>
                <field name="model_id"/>
                <field name="type"/>
            </tree>
        </field>
    </record>

    <record id="dashboard_block_action" model="ir.actions.act_window">
        <field name="name">Dashboard Block</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">dashboard.block</field>
        <field name="view_mode">tree,form</field>
        <field name="context">{'default_edit_mode' : True}</field>
    </record>

   

</odoo>